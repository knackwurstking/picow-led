{{ define "device-list-item" }}

{{ $serverPathPrefix := index . 0 }}
{{ $device := index . 1 }}

<section
    id="device-list-item-{{ $device.Server.Addr }}"
    class="device-list-item ui-flex row gap justify-between align-center ui-padding"
    style="width: 100%"
    data-addr
>
    <h3 class="title ui-padding">
        {{ if ne $device.Server.Name "" }}
            {{ $device.Server.Name }}
        {{ else }}
            {{ $device.Server.Addr }}
        {{ end }}
    </h3>

    <span class="ui-flex-item ui-flex row gap" style="flex: 0">
        <span class="ui-flex-item" style="flex: 0">
            <button
                class="edit"
                data-ui-variant="ghost"
                data-ui-color="secondary"
                data-addr
                onclick='
                    location.pathname = "{{ $serverPathPrefix }}/devices/"
                        + encodeURIComponent("{{ $device.Server.Addr }}")
                '
            >
                Edit
            </button>
        </span>

        <span class="ui-flex-item" style="flex: 0">
            <!-- data-state: "on" | "off" | "processing" -->
            <button
                class="power-button"
                style="width: 3rem; height: 3rem; overflow: visible"
                data-ui-variant="ghost"
                data-ui-icon
                data-state="off"
                data-addr="{{ $device.Server.Addr }}"
            >
                <div
                    class="background"
                    style="background-color: rgb(0, 0, 0)"
                ></div>

                {{ template "svg-power" }}
            </button>
        </span>
    </span>
</section>
{{ end }}
